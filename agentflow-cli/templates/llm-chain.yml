# LLM Chain Workflow Template
name: "LLM Processing Chain"
version: "1.0.0"
description: "Chain multiple LLM calls for complex processing"
author: "AgentFlow Team"

metadata:
  created: "2024-01-01T00:00:00Z"
  tags: ["llm-chain", "multi-step", "processing"]
  category: "advanced"

inputs:
  topic:
    type: "string"
    required: true
    description: "Topic to research and analyze"
    example: "Artificial Intelligence in Healthcare"
  
  depth:
    type: "string"
    required: false
    default: "detailed"
    enum: ["basic", "detailed", "comprehensive"]
    description: "Depth of analysis"

workflow:
  type: "sequential"
  nodes:
    # Step 1: Research the topic
    - name: "research_topic"
      type: "llm"
      description: "Research the given topic"
      config:
        model: "gpt-4o"
        prompt: |
          Research the topic: {{ inputs.topic }}
          
          Provide:
          1. Key concepts and definitions
          2. Current trends and developments
          3. Important challenges and opportunities
          4. Recent notable developments
          
          Depth level: {{ inputs.depth }}
          
          Format your response as structured information with clear sections.
        temperature: 0.3
        max_tokens: 1500
      outputs:
        research_data: "$.response"
    
    # Step 2: Analyze the research
    - name: "analyze_research"
      type: "llm"
      depends_on: ["research_topic"]
      description: "Analyze the research findings"
      config:
        model: "claude-3-sonnet"
        prompt: |
          Based on this research about {{ inputs.topic }}:
          
          {{ outputs.research_topic.research_data }}
          
          Please provide:
          1. Critical analysis of the key points
          2. Identification of patterns and connections
          3. Assessment of implications and impact
          4. Recommendations for further investigation
          
          Be analytical and provide insights beyond the original research.
        temperature: 0.5
        max_tokens: 1200
      outputs:
        analysis: "$.response"
    
    # Step 3: Generate summary
    - name: "create_summary"
      type: "template"
      depends_on: ["research_topic", "analyze_research"]
      description: "Create a structured summary"
      config:
        template: |
          # {{ inputs.topic }} - Analysis Report
          
          **Generated on:** {{ now() }}
          **Depth Level:** {{ inputs.depth }}
          
          ## Research Overview
          
          {{ outputs.research_topic.research_data }}
          
          ## Critical Analysis
          
          {{ outputs.analyze_research.analysis }}
          
          ---
          
          *Report generated by AgentFlow LLM Chain*
      outputs:
        summary: "$.rendered"

outputs:
  research_report:
    source: "{{ outputs.research_topic.research_data }}"
    format: "text"
    file: "research.txt"
  
  analysis_report:
    source: "{{ outputs.analyze_research.analysis }}"
    format: "text"
    file: "analysis.txt"
  
  final_summary:
    source: "{{ outputs.create_summary.summary }}"
    format: "markdown"
    file: "{{ inputs.topic | slugify }}_summary.md"